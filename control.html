<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Let’s program in R</title>
  <meta name="description" content="R Coursebook">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Let’s program in R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="R Coursebook" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Let’s program in R" />
  
  <meta name="twitter:description" content="R Coursebook" />
  

<meta name="author" content="Damir Pintar">


<meta name="date" content="2017-11-09">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="okviri.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />








<style type="text/css">
.showopt {
  background-color: #004c93;
  color: #FFFFFF; 
  width: 140px;
  height: 4	0px;
  text-align: center;
  vertical-align: middle !important;
  float: right;
  font-family: sans-serif;
  font-size:10 pt;
  border-radius: 8px;
}

.showopt:hover {
    background-color: #dfe4f2;
    color: #004c93;
}

pre.plot {
  background-color: white !important;
}
</style>

<script>
 $(document).ready(function() {

  $chunks = $('.fold');

  $chunks.each(function () {

    // add button to source code chunks
    if ( $(this).hasClass('s') ) {
      $('pre.r', this).prepend("<div class=\"showopt\">Show solution</div><br style=\"line-height:22px;\"/>");
      $('pre.r', this).children('code').attr('class', 'folded');
    }

    // add button to output chunks
    if ( $(this).hasClass('o') ) {
      $('pre:not(.r)', this).has('code').prepend("<div class=\"showopt\">Show results</div><br style=\"line-height:22px;\"/>");
      $('pre:not(.r)', this).children('code:not(r)').addClass('folded');

      // add button to plots
      $(this).find('img').wrap('<pre class=\"plot\"></pre>');
      $('pre.plot', this).prepend("<div class=\"showopt\">Show figure</div><br style=\"line-height:22px;\"/>");
      $('pre.plot', this).children('img').addClass('folded');

    }
  });

  // hide all chunks when document is loaded
  $('.folded').css('display', 'none')

  // function to toggle the visibility
  $('.showopt').click(function() {
    var label = $(this).html();
    if (label.indexOf("Show") >= 0) {
      $(this).html(label.replace("Show", "Hide"));
    } else {
      $(this).html(label.replace("Hide", "Show"));
    }
    $(this).siblings('code, img').slideToggle('fast', 'swing');
  });
});
</script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>(“Introduction to programming language R” course book)</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#foreword"><i class="fa fa-check"></i>Foreword</a></li>
</ul></li>
<li class="part"><span><b>I Basic elements of R</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#general-facts-about-r"><i class="fa fa-check"></i><b>1.1.1</b> General facts about R</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#r-alternatives"><i class="fa fa-check"></i><b>1.1.2</b> R alternatives</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#installing-software-support"><i class="fa fa-check"></i><b>1.2</b> Installing Software Support</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#overview-of-the-development-interface-rstudio"><i class="fa fa-check"></i><b>1.3</b> Overview of the development interface * RStudio *</a><ul>
<li class="chapter" data-level="1.3.1" data-path="introduction.html"><a href="introduction.html#interactive-console"><i class="fa fa-check"></i><b>1.3.1</b> Interactive console</a></li>
<li class="chapter" data-level="1.3.2" data-path="introduction.html"><a href="introduction.html#writing-r-scripts"><i class="fa fa-check"></i><b>1.3.2</b> Writing R scripts</a></li>
<li class="chapter" data-level="1.3.3" data-path="introduction.html"><a href="introduction.html#r-markdown"><i class="fa fa-check"></i><b>1.3.3</b> * R Markdown *</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#how-to-use-this-coursebook"><i class="fa fa-check"></i><b>1.4</b> How to use this coursebook?</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tipovi.html"><a href="tipovi.html"><i class="fa fa-check"></i><b>2</b> Basic data types and operators</a><ul>
<li class="chapter" data-level="2.1" data-path="tipovi.html"><a href="tipovi.html#basic-data-types"><i class="fa fa-check"></i><b>2.1</b> Basic data types</a></li>
<li class="chapter" data-level="2.2" data-path="tipovi.html"><a href="tipovi.html#operators"><i class="fa fa-check"></i><b>2.2</b> Operators</a></li>
<li class="chapter" data-level="2.3" data-path="tipovi.html"><a href="tipovi.html#missing-unknown-and-non-existent-values"><i class="fa fa-check"></i><b>2.3</b> Missing, unknown, and non-existent values</a></li>
<li class="chapter" data-level="" data-path="tipovi.html"><a href="tipovi.html#exercises"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vektori.html"><a href="vektori.html"><i class="fa fa-check"></i><b>3</b> Vectors, matrices and lists</a><ul>
<li class="chapter" data-level="3.1" data-path="vektori.html"><a href="vektori.html#vector"><i class="fa fa-check"></i><b>3.1</b> Vector</a><ul>
<li class="chapter" data-level="3.1.1" data-path="vektori.html"><a href="vektori.html#create-a-vector"><i class="fa fa-check"></i><b>3.1.1</b> Create a vector</a></li>
<li class="chapter" data-level="3.1.2" data-path="vektori.html"><a href="vektori.html#operator"><i class="fa fa-check"></i><b>3.1.2</b> Operator <code>[</code></a></li>
<li class="chapter" data-level="3.1.3" data-path="vektori.html"><a href="vektori.html#principle-of-vectorization-and-recycling"><i class="fa fa-check"></i><b>3.1.3</b> Principle of vectorization and recycling</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vektori.html"><a href="vektori.html#index-vectors"><i class="fa fa-check"></i><b>3.2</b> Index vectors</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vektori.html"><a href="vektori.html#location-indexing"><i class="fa fa-check"></i><b>3.2.1</b> Location Indexing</a></li>
<li class="chapter" data-level="3.2.2" data-path="vektori.html"><a href="vektori.html#conditional-indexing"><i class="fa fa-check"></i><b>3.2.2</b> Conditional indexing</a></li>
<li class="chapter" data-level="3.2.3" data-path="vektori.html"><a href="vektori.html#label-based-indexing"><i class="fa fa-check"></i><b>3.2.3</b> Label-based indexing</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vektori.html"><a href="vektori.html#matrices-and-arrays"><i class="fa fa-check"></i><b>3.3</b> Matrices and arrays</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vektori.html"><a href="vektori.html#matrix-splicing"><i class="fa fa-check"></i><b>3.3.1</b> Matrix splicing</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vektori.html"><a href="vektori.html#lists"><i class="fa fa-check"></i><b>3.4</b> Lists</a></li>
<li class="chapter" data-level="" data-path="vektori.html"><a href="vektori.html#exercises-1"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="okviri.html"><a href="okviri.html"><i class="fa fa-check"></i><b>4</b> Data frames and factors</a><ul>
<li class="chapter" data-level="4.1" data-path="okviri.html"><a href="okviri.html#data-frames"><i class="fa fa-check"></i><b>4.1</b> Data frames</a></li>
<li class="chapter" data-level="4.2" data-path="okviri.html"><a href="okviri.html#selecting-rows-and-columns"><i class="fa fa-check"></i><b>4.2</b> Selecting rows and columns</a></li>
<li class="chapter" data-level="4.3" data-path="okviri.html"><a href="okviri.html#adding-and-deleting-rows-and-columns"><i class="fa fa-check"></i><b>4.3</b> Adding and deleting rows and columns</a></li>
<li class="chapter" data-level="4.4" data-path="okviri.html"><a href="okviri.html#factors"><i class="fa fa-check"></i><b>4.4</b> Factors</a></li>
<li class="chapter" data-level="" data-path="okviri.html"><a href="okviri.html#exercises-2"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control.html"><a href="control.html"><i class="fa fa-check"></i><b>5</b> Flow control and objects</a><ul>
<li class="chapter" data-level="5.1" data-path="control.html"><a href="control.html#flow-control-commands"><i class="fa fa-check"></i><b>5.1</b> Flow control commands</a><ul>
<li class="chapter" data-level="5.1.1" data-path="control.html"><a href="control.html#conditional-execution-of-commands"><i class="fa fa-check"></i><b>5.1.1</b> Conditional execution of commands</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="control.html"><a href="control.html#program-loops"><i class="fa fa-check"></i><b>5.2</b> Program Loops</a><ul>
<li class="chapter" data-level="5.2.1" data-path="control.html"><a href="control.html#loop-repeat"><i class="fa fa-check"></i><b>5.2.1</b> Loop <code>repeat</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="control.html"><a href="control.html#while-loop"><i class="fa fa-check"></i><b>5.2.2</b> <code>while</code> loop</a></li>
<li class="chapter" data-level="5.2.3" data-path="control.html"><a href="control.html#for-loop"><i class="fa fa-check"></i><b>5.2.3</b> <code>for</code> loop</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="control.html"><a href="control.html#object-models-in-r-language"><i class="fa fa-check"></i><b>5.3</b> Object models in R language</a><ul>
<li class="chapter" data-level="5.3.1" data-path="control.html"><a href="control.html#overview-of-the-s3-object-model"><i class="fa fa-check"></i><b>5.3.1</b> Overview of the S3 object model</a></li>
<li class="chapter" data-level="5.3.2" data-path="control.html"><a href="control.html#generic-functions"><i class="fa fa-check"></i><b>5.3.2</b> Generic functions</a></li>
<li class="chapter" data-level="5.3.3" data-path="control.html"><a href="control.html#conclusion-on-s3-objects"><i class="fa fa-check"></i><b>5.3.3</b> Conclusion on S3 objects</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="control.html"><a href="control.html#exercises-3"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Let’s program in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="control" class="section level1">
<h1><span class="header-section-number">5</span> Flow control and objects</h1>
<hr />
<div id="flow-control-commands" class="section level2">
<h2><span class="header-section-number">5.1</span> Flow control commands</h2>
<p>Under flow control commands we mostly refer to constructs for conditional execution and so-called “program loops” where the segment of the program is continually executed until (optionally) certain conditions are fulfulled.</p>
<div id="conditional-execution-of-commands" class="section level3">
<h3><span class="header-section-number">5.1.1</span> Conditional execution of commands</h3>
<p>For conditional execution we use the so-called <code>if-then</code> block:</p>
<p><code>if (condition) {block} else {block}</code></p>
<p>This command is pretty straightforward. In the next exercise we will show how to avoid a relatively common error when writing <code>if</code> commands. Try to spot and correct it.</p>
<hr />
<p><strong>Exercise 5.1 - <code>if</code> command</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># execute the next conditional execution command</span>
if (<span class="dv">2</span> &gt;<span class="st"> </span><span class="dv">1</span>) <span class="kw">print</span> (<span class="st">&quot;Success!&quot;</span>)


<span class="co"># find the error in the next `if-else` command and correct it</span>
if (<span class="dv">1</span> &gt;<span class="st"> </span><span class="dv">2</span>) <span class="kw">print</span> (<span class="st">&quot;Success!&quot;</span>)
else <span class="kw">print</span> (<span class="st">&quot;Fail!&quot;</span>)</code></pre></div>
<div class="fold s o">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># execute the next conditional execution command</span>
if (<span class="dv">2</span> &gt;<span class="st"> </span><span class="dv">1</span>) <span class="kw">print</span> (<span class="st">&quot;Success!&quot;</span>)


<span class="co"># find the error in the next `if-else` command and correct it</span>
if (<span class="dv">1</span> &gt;<span class="st"> </span><span class="dv">2</span>) {<span class="kw">print</span> (<span class="st">&quot;Success!&quot;</span>)
  } else <span class="kw">print</span> (<span class="st">&quot;Failed!&quot;</span>)</code></pre></div>
<pre><code>## [1] &quot;Success!&quot;
## [1] &quot;Failed!&quot;</code></pre>
</div>
<hr />
<p>The error occurs because R is an interpreting language that normally executes a row per line, unless we forward an “incomplete” command to R, whereby it will wait for the “rest” before it starts executing. In the previous example, the second <code>if</code>command is actually completed in the first line, so R is “surprised” when the next line starts with <code>else</code>. In order to prevent this scenario, it is sufficient to explain in some way to R that the command has not yet been completed, which is most easily accomplished by opening the block in the first line and closing it in the line with <code>else</code>.</p>
<p>The readers who are programming in C or Java will recognize the so-called “ternary operator” that actually represents a compact version of the <code>if-else</code> block:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x =<span class="st"> </span>(a &lt;b) ? c:<span class="st"> </span>d <span class="co"># not R language!</span></code></pre></div>
<p>The role of this operator in R is performed by the <code>ifelse</code> function.</p>
<hr />
<p><strong>Exercise 5.2 - <code>ifelse</code> function</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">3</span>
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>)

<span class="co"># what does the vector `x` look like after executing the following command?</span>
<span class="co"># Think about the answer and then check the correctness of the solution</span>

x &lt;-<span class="st"> </span><span class="kw">ifelse</span> (a &lt;<span class="st"> </span>b, <span class="dv">2</span>, <span class="dv">5</span>)</code></pre></div>
<div class="fold s o">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># what does the vector `x` look like after executing the following command?</span>
<span class="co"># Think about the answer and then check the correctness of the solution</span>
x &lt;-<span class="st"> </span><span class="kw">ifelse</span> (a &lt;b, <span class="dv">2</span>, <span class="dv">5</span>)
x</code></pre></div>
<pre><code>## [1] 2 2 2 2</code></pre>
</div>
<p>Note that the <code>ifelse</code> function is vectorized, which is why it is particularly suitable for creating new columns of data frames derived from certain conditions related to the existing columns.</p>
<hr />
</div>
</div>
<div id="program-loops" class="section level2">
<h2><span class="header-section-number">5.2</span> Program Loops</h2>
<p>In the programming language R we have three types of loops:</p>
<ul>
<li><code>repeat</code> - infinite loop</li>
<li><code>while</code> - loop with checking conditions at the beginning</li>
<li><code>for</code> - iterator loop (“loop with known number of repetitions”)</li>
</ul>
<div id="loop-repeat" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Loop <code>repeat</code></h3>
<p><code>repeat</code> is the simplest loop. It has the following syntax:</p>
<p><code>repeat {block}</code></p>
<p>It is an “infinite” loop where, once the block is completed, it is re-executed again so on. The only way to exit this loop is to use the <code>break</code> command. In addition to this we have a <code>next</code> command that will skip the rest of the block, but it will not exit loop.</p>
<p>Let’s see how this loop works in the next exercise.</p>
<p><strong>Exercise 5.3 - <code>repeat</code> loop</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># answer the following questions before running the next block:</span>
<span class="co"># - will the loop run indefinitely?</span>
<span class="co"># - what will be printed on the screen?</span>

i &lt;-<span class="st"> </span><span class="dv">1</span>
repeat {
    i &lt;-<span class="st"> </span>i +<span class="st"> </span><span class="dv">1</span>
    if (i %%<span class="st"> </span><span class="dv">2</span> ==<span class="st"> </span><span class="dv">0</span>) next
    <span class="kw">print</span> (i)
    if (i&gt;<span class="st"> </span><span class="dv">10</span>) break
}</code></pre></div>
<div class="fold s o">
<pre><code>## [1] 3
## [1] 5
## [1] 7
## [1] 9
## [1] 11</code></pre>
</div>
<p>We often know the exact condition for exiting the loop and want to place it in a clearly visible place so it is not “hidden” in the body of the loop. Hence, we may find the <code>while</code> loop to be more useful.</p>
</div>
<div id="while-loop" class="section level3">
<h3><span class="header-section-number">5.2.2</span> <code>while</code> loop</h3>
<p><code>while</code> represents the “purest” form of the program loop whose syntax literally means “while the condition is met, repeat the specified code”:</p>
<p><code>while (condition) {block}</code></p>
<p><strong>Exercise 5.4 - <code>while</code> loop</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add the loop condition so it loops</span>
<span class="co"># exactly 7 times</span>

i &lt;-<span class="st"> </span><span class="dv">1</span>

while () {
  <span class="kw">print</span>(i)
  i &lt;-<span class="st"> </span>i +<span class="st"> </span><span class="dv">1</span>
}</code></pre></div>
<div class="fold s o">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># add the loop requirement so that it does</span>
<span class="co"># exactly 7 times</span>

i &lt;-<span class="st"> </span><span class="dv">1</span>

while (i &lt;=<span class="st"> </span><span class="dv">7</span>) {
  <span class="kw">print</span>(i)
  i &lt;-<span class="st"> </span>i +<span class="st"> </span><span class="dv">1</span>
}</code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7</code></pre>
</div>
<p>With this loop we have to make sure that in a certain iteration conditions for exiting will be met, otherwise it also becomes an “infinite” loop. We are also free to use the <code>next</code> and<code>break</code> commands, which have the same function as in the <code>repeat</code> loop.</p>
</div>
<div id="for-loop" class="section level3">
<h3><span class="header-section-number">5.2.3</span> <code>for</code> loop</h3>
<p>A <code>for</code> loop or “iterator loop” serves to easily “walk” over a data structure (most commonly vector), getting element by element and doing something with it. It uses the <code>for</code> keyword, the name of the new iterator variable, the keyword<code>in</code>, and the vector whose values are taken one by one and used within the loop (note that the specified <code>in</code> is not the same as the <code>%in%</code> operator which checks if some element is contained in the vector!). The syntax of this loop is as follows:</p>
<p><code>for (i in v) {do something with i}</code></p>
<p>Note that here the variable <code>i</code> is not a “counter” - in every loop iteration it becomes the value of the element we come across. If we want to iterate by the indexes, not by the elements themselves, then we can use the construct <code>for (i in 1:length (a))</code>.</p>
<p><strong>Exercise 5.5 - <code>for</code> loop</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">seq</span>(-<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">4</span>)

<span class="co"># print vector elements of `a` one by one</span>
<span class="co"># with the help of `for` loop </span>
<span class="co"># access the elements directly</span>


<span class="co"># do the same, but iterate by indexes</span></code></pre></div>
<div class="fold s o">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">seq</span>(-<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">4</span>)

<span class="co"># print vector elements of `a` one by one</span>
<span class="co"># with the help of `for` loop </span>
<span class="co"># access the elements directly</span>
for (i in a)  <span class="kw">print</span>(i)

<span class="co"># do the same, but iterate by indexes</span>
for (i in <span class="dv">1</span>:<span class="kw">length</span> (a)) <span class="kw">print</span>(a[i])</code></pre></div>
<pre><code>## [1] -10
## [1] -6
## [1] -2
## [1] 2
## [1] 6
## [1] 10
## [1] -10
## [1] -6
## [1] -2
## [1] 2
## [1] 6
## [1] 10</code></pre>
</div>
<p>Notice that the second way is better if you want to change the vector elements or need information on where the element is located in the original vector.</p>
<hr />
<p>Now that now that we have learned the loop syntax, it is important to emphasize one fact - <strong>in programming language R, it is generally not recommended to use program loops</strong>. Although this may initially seem unexpected and somewhat shocking, the reason is simple - R language is designed to work by the declarative “all at once” principle. We have already seen that the principle of vectorization and recycling effectively perform jobs that would require a loop in other programming languages, and in the chapters that follow, we will see that R also offers many other constructs that avoid explicit code repetition with the requirement of a declarative syntax that automatically performs it.</p>
<p>For example, the following example is syntactically correct:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example of unnecessary loop usage</span>
a &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="st"> </span><span class="dv">5</span>
b &lt;-<span class="st"> </span><span class="dv">6</span>:<span class="dv">10</span>
c &lt;-<span class="st"> </span><span class="kw">numeric</span>()

for (i in <span class="dv">1</span>:<span class="kw">length</span> (a)) c[i] &lt;-<span class="st"> </span>a[i] +<span class="st"> </span>b[i]</code></pre></div>
<p>but probably works slower and is much less readable than:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># R syntax</span>
a &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">5</span>
b &lt;-<span class="st"> </span><span class="dv">6</span>:<span class="dv">10</span>

c &lt;-<span class="st"> </span>a +<span class="st"> </span>b</code></pre></div>
<p>All of this does not mean that we should not use loops in R, but that their use should be accompanied by an additional consideration of whether the loop is really needed and whether there is an alternative syntax that completes the same task but can be written declaratively (and is potentially faster, since many routines in R are implemented in language C). Early adoption of the “R” mode of thinking will result in long-term benefits that will be reflected in a more compact, cleaner, and often more effective program code.</p>
<hr />
</div>
</div>
<div id="object-models-in-r-language" class="section level2">
<h2><span class="header-section-number">5.3</span> Object models in R language</h2>
<p>R is designed as an object-oriented language, together with the mechanisms that the object-oriented paradigm requires - <em>encapsulation</em> (enveloping various attributes into a common entity), <em>polymorphism</em> (using the same function over different objects results in different operations depending on the nature of the object) and <em>inheritance</em> (creating new objects from the existing ones by expanding them with additional elements).</p>
<p>R has taken its initial way of object modeling from the S language and therefore such objects are known as “S3 objects” (according to the S language version from which they were originally taken). This object model, which we will learn very soon, is actually very unconventional and simple but also as such fairly suitable for using in R, it being primarily a domain-oriented language. With the increasing number of programmersin the R community, the pressure to bring support to objects that will be more similar to the way they work in the other programming languages has increased, in order to bring better robustness in design and management of objects.</p>
<p>All this has led to the fact that today we have formally four types of objects in the programming language R:</p>
<ul>
<li>“base”&quot; classes - basic R elements (functions, vectors, data frames)</li>
<li>S3 objects - principle of object design taken from S language (version 3)</li>
<li>S4 objects - a more formal and rigorous way of creating objects approaching standard object-oriented mechanisms from other languages</li>
<li>RC objects (<em>reference classes</em>) - the most recent way of creating objects (introduced in version 2.12) that replicates the “classical” object-oriented principles based on the exchange of messages</li>
</ul>
<p>The existence of three different models of defining objects (we can ignore the basic since we can not formally expand it with new objects) can seem disheartening - is it necessary to learn all three models? How to distinguish them? Which one to choose? However, despite the fact that the story about the object nature of R during its development is (unnecessarily) complicated, the good news is that for most needs, it’s quite enough to learn how the S3 model works, which is also the simplest. A large number of popular R packages use only S3 classes and it is possible to work in language R for a very long time without meeting the need for learning S4 or RC models. For this reason, we will focus on the S3 objects only (readers who want more information on other models can look at a very good book called <em>Advanced R</em>, by the author Hadley Wickham, which deals, among other things, with the object models in R).</p>
<hr />
<div id="overview-of-the-s3-object-model" class="section level3">
<h3><span class="header-section-number">5.3.1</span> Overview of the S3 object model</h3>
<p>As already mentioned, S3 objects are actually taken from S programming language and represent a relatively primitive implementation of the concept of “object”, as far as expectations go regarding standard methods of object creation. <strong>S3 object is actually just a list with the additional <code>class</code> attribute</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># we are creating a new object of a class `Person`</span>
pero &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">oib =</span> <span class="st">&quot;12345678&quot;</span>, <span class="dt">lastname =</span> <span class="st">&quot;Peric&quot;</span>, <span class="dt">weight =</span> <span class="dv">78</span>)
<span class="kw">class</span>(pero) &lt;-<span class="st"> &quot;Person&quot;</span></code></pre></div>
<p>And that’s it! Notice that we do not have a formally defined “template” of the class that we instance in the object as is the established practice in other programming languages. For S3 objects, we simply create a list and then declare that that list is an object of a certain class, although the structure of that class is only implied by the object’s appearance (and does not have to match the structure of another object declared to belong to the same class).</p>
<p>Of course, such a convenient way of constructing objects is not advisable so we recommend that we in practice do not construct the class “manually”, but rather to write and use a special constructor function whose parameters will actually define the object’s appearance (this will be learned in the lesson about creating user-defined functions)</p>
<p>What about inheritance, where class-child inherits properties from its parent?</p>
<p>R enables inheritance, but also in a very informal and relatively trivial way. Rather than just listing a single “class” name with the <code>class</code> attribute, we create a character vector where the first element will be the class name, and the other elements will be parent classes, sorted by ‘importance’. For example, if we created a new <code>mate</code> object of class <code>Employee</code> which inherits the class <code>Person</code>, then it is enough to do the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mate &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">oib =</span> <span class="st">&quot;12345678&quot;</span>, <span class="dt">lastname =</span> <span class="st">&quot;Peric&quot;</span>, <span class="dt">weight =</span> <span class="dv">78</span>, <span class="dt">yearEmpl =</span> <span class="dv">2001</span>)
<span class="kw">class</span>(mate) &lt;-<span class="st"> </span><span class="kw">c</span> (<span class="st">&quot;Employee&quot;</span>, <span class="st">&quot;Person&quot;</span>)</code></pre></div>
<p>We note that all the attribute inheritance work must be done “manually”, that is, we have to make sure that the parent has the attributes of the <code>Person</code> class.</p>
</div>
<div id="generic-functions" class="section level3">
<h3><span class="header-section-number">5.3.2</span> Generic functions</h3>
<p>Looking at the above way of the object design, it is legitimate to ask an additional question - where are the methods? As we know, standard object-oriented principles assume the encapsulation of the attribute but also the methods in the form of an object. Here is the basic difference between the S3 object and the “standard” objects from the other programming languages - <strong>in S3 object model the method is defined outside of the object, in the form of so-called generic functions</strong>.</p>
<p>Why is that so? The idea is the following: when working with objects, the user (programmer, analyst) often calls the same functions (eg “print”, “draw”, “summary description”) over objects of different types. The function of the same name will work differently depending on the object over which it is called - hence the name <strong>generic function</strong>. So, the <code>print</code> function always results in some kind of print, but how the printing actually works depends on the object we are printing.</p>
<p>This way of designing an object can be extremely unconventional, but the fact is that the call of a generic function makes it look far more intuitive, especially for users who do not have a big experience in programming. Specifically, let’s compare the command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">start</span>(car, <span class="dt">speed =</span> <span class="dv">20</span>)</code></pre></div>
<p>with the command:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">car.start</span>(<span class="dt">speed =</span> <span class="dv">20</span>)</code></pre></div>
<p>By reading the first command, the car is perceived as an “object” (in terms of word service in a sentence), that is, something we do “to” this object. The second command sets the car as a subject, which is common practice in object-oriented languages, but is not in line with the general understanding of doing things to some objects.</p>
<p>In working with programming language R we often do “similar” tasks over different objects - we print their contents, draw them on a graph, look for some concise details of them, etc. For this reason, and the fact that R is often interactive, R is designed in a way that we think <strong>what</strong> we want to do instead of asking ourselves <strong>where</strong> the function we want to call is. If we want to print an object, it is logical to just forward it to the <code>print</code> function ,if we want to draw it the <code>plot</code> function, ans if we want to summarize it - the <code>summary</code> function.</p>
<p>How does a single function “know” what to do with an object? The answer is simple - the generic function is just “interface” to the “right” function we call, and the logic to find the right function is trivial - if the generic name of the function is <code>genFun</code>, and the name of the object class is <code>className</code>, the function actually being called is <code>genFun.className</code>. If no such function exists, the function <code>genFun.default</code> is called.</p>
<p>This can easily be seen in the next exercise.</p>
<p><strong>Exercise 5.6 - generic functions</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print the `summary` function (only the function name!)</span>

<span class="co"># print a function that is actually being called when you call</span>
<span class="co"># the `summary` function of the `factor` class object</span></code></pre></div>
<div class="fold s o">

<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># print the `summary` function (only the function name!)</span>
summary


<span class="co"># print a function that is actually being called when you call</span>
<span class="co"># the `summary` function of the `factor` class object</span>
summary.factor</code></pre></div>
<pre><code>## standardGeneric for &quot;summary&quot; defined from package &quot;base&quot;
## 
## function (object, ...) 
## standardGeneric(&quot;summary&quot;)
## &lt;environment: 0x0000000017918f68&gt;
## Methods may be defined for arguments: object
## Use  showMethods(&quot;summary&quot;)  for currently available ones.
## function (object, maxsum = 100L, ...) 
## {
##     nas &lt;- is.na(object)
##     ll &lt;- levels(object)
##     if (ana &lt;- any(nas)) 
##         maxsum &lt;- maxsum - 1L
##     tbl &lt;- table(object)
##     tt &lt;- c(tbl)
##     names(tt) &lt;- dimnames(tbl)[[1L]]
##     if (length(ll) &gt; maxsum) {
##         drop &lt;- maxsum:length(ll)
##         o &lt;- sort.list(tt, decreasing = TRUE)
##         tt &lt;- c(tt[o[-drop]], `(Other)` = sum(tt[o[drop]]))
##     }
##     if (ana) 
##         c(tt, `NA&#39;s` = sum(nas))
##     else tt
## }
## &lt;bytecode: 0x000000002296cfc0&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>By understanding the principle of generic functions, we have completed a picture of S3 objects. The most important thing we have to adopt is that in this model functions are not part of the object itself, they are defined separately, and the link between the object and its “method” is only in the function name by which R “links” the generic function and that object. Although this principle is primitive and vulnerable to faults in the hands of inattentive developers, it is easy to use and very effective. Finally, let’s note that this approach is not entirely unique to the language R - similar principles can be found in other programming languages. It is specific to R in that the principle is used openly and almost exclusively.</p>
<p>Objects and generic functions will be re-visited when we learn to create our own functions, which will enable us to create both the constructors of our objects and their generic functions.</p>
</div>
<div id="conclusion-on-s3-objects" class="section level3">
<h3><span class="header-section-number">5.3.3</span> Conclusion on S3 objects</h3>
<p>In short, the conclusions about S3 objects can be as follows:</p>
<ul>
<li>S3 objects function in <strong>in a simple, informal way</strong> - they are simply lists with the arbitrary value of <code>class</code> attributes</li>
<li>Much of this is left to <strong>the responsibility of the programmer</strong></li>
<li>the S3 object methods are not encapsulated within the objects, but are designed “out of” objects in the form of generic functions</li>
<li>S3 objects <strong>are not suitable for complex object models</strong> due to heavy model maintenance and large potential of errors</li>
</ul>
</div>
</div>
<div id="exercises-3" class="section level2 unnumbered">
<h2>Exercises</h2>
<ol style="list-style-type: decimal">
<li>Create a data frame with the following command:</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cities &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">zipcode =</span> <span class="kw">c</span>(<span class="dv">10000</span>, <span class="dv">51000</span>, <span class="dv">21000</span>, <span class="dv">31000</span>, <span class="dv">2000</span>),
         <span class="dt">cityName =</span> <span class="kw">c</span>(<span class="st">&quot;Zagreb&quot;</span>, <span class="st">&quot;Rijeka&quot;</span>, <span class="st">&quot;Split&quot;</span>, <span class="st">&quot;Osijek&quot;</span>, <span class="st">&quot;Dubrovnik&quot;</span>),
         <span class="dt">cityTax=</span> <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">15</span>, <span class="dv">10</span>, <span class="dv">13</span>, <span class="dv">10</span>))</code></pre></div>
<p>Add thie “taxLevel” which will be the ordinal factor variable with the levels “small”, “medium” and “high” depending on whether the percentage of tax is strictly smaller than 12, between 12 and 15 or strictly greater than 15. Use the <code>ifelse</code> command.</p>
<ol start="2" style="list-style-type: decimal">
<li>Replace the loops in the next block with equivalent vectorized operations (for the second loop, review the <code>sum</code> function documentation).</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">numeric</span>()
i &lt;-<span class="st"> </span><span class="dv">1</span>

while (i &lt;=<span class="st"> </span><span class="dv">100</span>) {
  a &lt;-<span class="st"> </span><span class="kw">c</span>(a, i)
  i &lt;-<span class="st"> </span>i +<span class="st"> </span><span class="dv">1</span>
}

total &lt;-<span class="st"> </span><span class="dv">0</span>

for (i in a) {
  if (i %%<span class="st"> </span><span class="dv">2</span> ==<span class="st"> </span><span class="dv">0</span>) total &lt;-<span class="st"> </span>total +<span class="st"> </span>i *<span class="st"> </span>i
}

<span class="kw">print</span> (total)</code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Create a class object <code>Block</code> with the attributes <code>height</code>, <code>width</code> and <code>depth</code> equal to<code>10</code>, <code>20</code> and <code>30</code> respectively.</li>
</ol>
<hr />
<p><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/4.0/"> <img alt = "Creative Commons License" style = "border-width: 0" src = "https://i.creativecommons.org/l/by-nc-nd/4.0/88x31.png" /> </a> <br /> <span xmlns: dct = "http://purl.org/ dc / terms / "property =" dct: title "> Program in Ru &lt;/ span&gt; by <a xmlns: cc =" http://creativecommons.org/ns# "href =" https: //www.fer. unizg.hr/en/damir.pintar "property =" cc: attributionName "rel =" cc: attributionURL "> Damir Pintar </a> is licensed under <a rel =" license "href =" http: // creativecommons .org / licenses / by-nc-nd / 4.0 / "> Creative Commons Attribution-NonCommercial-NoDerivative 4.0 International License </a> <br /> Based on a work at <a xmlns: dct =" http: // purl.org/dc/terms/ "href =" https://ratnip.github.io/FER_OPJR/ "rel =" dct: source "> https://ratnip.github.io/FER_OPJR/ </a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="okviri.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"edit": null,
"download": null,
"search": true
}
});
});
</script>

</body>

</html>
